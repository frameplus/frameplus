# Frame Plus ERP — 최강 통합 전략 리포트

## v7 코드베이스(현재) + v8-4.jsx 결합 분석

**작성일**: 2026-02-19 v2  
**목적**: 현재 운용 코드(v7)를 베이스로, v8-4.jsx의 강점을 흡수하여 최강의 ERP 구축  
**전략**: **v7(베이스) + v8(결합)** — v7의 인프라·디자인·안정성 위에 v8의 비즈니스 로직을 포팅

---

## 0. 전체 규모 비교

| 항목 | v7 현재 코드베이스 | v8-4.jsx (참조) |
|------|-------------------|----------------|
| **총 코드량** | 6,163줄 (index.tsx 1,176 + app.js 4,987) | 3,798줄 (단일 React 파일) |
| **함수 수** | 272개 (app.js 단독) | 48개 View 컴포넌트 + 유틸 ~30개 |
| **DB 테이블** | 20개 (D1, 자동생성) | 시드 데이터 (DB 없음, in-memory) |
| **CSS** | CSS 변수 기반 (var(--) 514회 사용), 다크모드, 반응형 | 인라인 스타일 (Theme 객체 T), 다크모드 없음 |
| **서버** | Hono + Cloudflare Workers (CRUD 자동생성, 이메일, 날씨, AI) | 없음 (React 단독, 클라이언트 전용) |
| **배포** | Cloudflare Pages 실가동 | 미배포 (프로토타입) |

---

## 1. 아키텍처 비교 — 왜 v7이 베이스인가

### v7 (현재 코드베이스)의 핵심 강점

| 강점 | 상세 |
|------|------|
| 🏗️ **서버-클라이언트 분리** | `index.tsx`(서버) + `app.js`(프론트) = 관심사 분리 |
| 🗄️ **D1 실 데이터베이스** | 20개 테이블, Generic CRUD, 자동 마이그레이션 |
| 🎨 **Pluuug SaaS 디자인** | CSS 변수 기반, 다크모드, 완전 반응형, 모바일 하단 네비 |
| ⚡ **Optimistic UI** | API 호출 전 UI 즉시 반영 → 롤백 패턴 |
| 📧 **이메일 발송** | Resend API 연동 (견적서, 발주서, 미팅 메일) |
| 🌤️ **날씨/AI 연동** | OpenWeather + OpenAI (맞춤법, AI 어시스트) |
| 📊 **차트 라이브러리** | Chart.js 연동 (월별 매출 차트) |
| 🔔 **알림 시스템** | 실시간 뱃지, 읽음 처리, 알림 센터 |
| ✅ **결재 워크플로** | 경비 결재 요청→승인→반려 전체 흐름 |
| 📦 **XLSX 내보내기** | 프로젝트, 발주, 노무비, 경비 엑셀 내보내기 |
| 🖨️ **인쇄/PDF** | 견적서, 발주서, 노무명세서 인쇄 지원 |
| 🔗 **URL 라우팅** | Browser history 기반 SPA + 딥링크 |
| 🌙 **다크모드** | CSS 변수 전환 + 서버 설정 저장 |
| 📱 **모바일 대응** | 하단 네비게이션, 햄버거 메뉴, 터치 최적화 |

### v8 (참조 파일)의 핵심 강점

| 강점 | 상세 |
|------|------|
| 💰 **통합 수익 계산 엔진** | `getFinSummary()` — 견적원가, 실집행(발주+노무+경비), 수금, 마진율 통합 계산 |
| 📈 **월별 현금흐름 집계** | `getMonthlyAgg()` — 월별 매출/지출/순이익 자동 집계 |
| 🏢 **경영 대시보드** | `DashView` — CEO용 KPI 6개, 현금흐름 차트, 수익 랭킹, 예산초과 경고 |
| 💹 **현금 흐름 뷰** | `CashFlowView` — 12개월 수입/지출/순현금 비교 |
| 🏆 **수익 분석 뷰** | `ProfitRankView` — 프로젝트별·거래처별 수익 상세 + 정렬 |
| 📋 **프로젝트 상세 모드** | `PROJECT_NAV` — 프로젝트 진입 시 사이드바 전환 (ERP/시공/Design/문서) |
| 🏠 **ERP Overview** | `ErpOverviewView` — 프로젝트별 6개 KPI + 예산vs집행 + 원가구성 |
| 📊 **ERP Budget** | `ErpBudgetView` — 공종별 예산 편성·관리 |
| 📎 **ERP Attachments** | `ErpAttachmentsView` — 비용유형별(공사비/인건비/경비/기타) 증빙 관리 |
| 📈 **ERP Report** | `ErpReportView` — 프로젝트별 매출·원가·마진·VAT 통합 분석 |
| 🤝 **상담 관리** | `ConsultView` — CRM 파이프라인 (초기상담→니즈파악→제안→계약) |
| 📝 **RFP 관리** | `RfpView` — 입찰/제안 관리 (제안서, 평가 점수, 마감일) |
| 📐 **디자인 모듈 5개** | Concept / Mood Board / Floor Plan / Materials / Design Overview |
| 📸 **현장사진 관리** | `SitePhotosView` — 공사 단계별 사진 정리 |
| 🔍 **현장 분석** | `SiteAnalysisView` — 건물 분석, 구조 이슈, 설비, 접근성, 리스크 |
| 📄 **견적서 프리뷰 (5탭)** | 표지(고급 세리프) / 견적서 요약 / 상세 내역서 / 공정표 / 대금조건 |
| 🔧 **Gantt 자동 생성** | `generateGanttFromEstimate()` — 견적서에서 공정표 자동 생성 |
| 📋 **회의자료 관리** | `MeetingMaterialsView` — 미팅 첨부·체크리스트·후속조치 |
| ⚙️ **설정 화면** | `SettingsView` — 회사정보, 사용자 설정 |
| 🏷️ **비용유형 시스템** | `COST_TYPES` — 공사비/인건비/경비/기타 4개 구분 체계 |

---

## 2. 기능 완전 비교 매트릭스 (모든 모듈)

### 범례
- ✅ 완전 구현  |  🔶 기본 구현  |  ❌ 미구현  |  🔴 버그 있음

### 2.1 인프라 & 공통

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| D1 DB (20개 테이블) | ✅ | ❌ (in-memory) | v7 유지 |
| Generic CRUD API | ✅ | ❌ | v7 유지 |
| Optimistic UI | ✅ | ❌ | v7 유지 |
| CSS 변수 디자인 | ✅ 514회 사용 | ❌ (인라인 T 객체) | v7 유지 |
| 다크모드 | ✅ | ❌ | v7 유지 |
| 모바일 반응형 | ✅ 하단네비 | 🔶 @media 기본 | v7 유지 |
| 이메일 발송 (Resend) | ✅ | ❌ | v7 유지 |
| 날씨 API | ✅ | ❌ | v7 유지 |
| AI (맞춤법/어시스트) | ✅ | ❌ | v7 유지 |
| Chart.js | ✅ | ❌ (CSS 막대) | v7 유지 |
| XLSX 내보내기 | ✅ | ❌ | v7 유지 |
| 알림 시스템 | ✅ 뱃지+센터 | 🔶 기본 목록 | v7 유지 |
| 결재 워크플로 | ✅ 요청→승인→반려 | 🔶 기본 | v7 유지 |
| URL 라우팅 | ✅ 딥링크 | ✅ Escape키 복귀 | v7 유지 + v8 Escape 참고 |

### 2.2 대시보드 & 경영

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| **운영 대시보드** (메인) | ✅ Cost Flow Pipeline, KPI 4개, 진행 프로젝트, 이번주 일정, 빠른 실행, 리스크, 파이프라인, 공지, 날씨, 월매출 차트 | ❌ | **v7 유지 (메인)** |
| **경영 대시보드** (CEO) | ❌ | ✅ KPI 6개(매출/실집행/순이익/미수금/프로젝트수/마진율), 현금흐름 차트, 수익 랭킹, 예산 초과 경고, 위험 알림 | **v8에서 포팅 ★** |
| **통합 수익 계산** | ❌ | ✅ `getFinSummary()` — 견적원가, 실집행, 수금, 마진 | **v8에서 포팅 ★★** |
| **월별 현금흐름 집계** | ❌ | ✅ `getMonthlyAgg()` — 월별 수입/지출/순이익 | **v8에서 포팅 ★★** |
| **현금 흐름 뷰** | ❌ | ✅ 12개월 Bar 차트 + 테이블 | **v8에서 포팅 ★** |
| **수익 분석 뷰** | ❌ | ✅ 프로젝트별·거래처별 + 3종 정렬 | **v8에서 포팅 ★** |
| **예산 초과 경고** | ❌ | ✅ 집행률 90%/100% 경고 | **v8에서 포팅 ★** |

### 2.3 프로젝트 관리

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| 프로젝트 목록 | ✅ 테이블형 (정렬, 필터, 월 그룹) | ✅ 카드형 (태그, 진행률 바) | v7 테이블 유지 + v8 카드뷰 옵션 추가 |
| 프로젝트 추가/편집 | ✅ 모달 방식 | ✅ 인라인+모달 | v7 유지 |
| **프로젝트 클릭 동작** | 🔴 **estimate로만 이동** | ✅ **erp_overview로 이동** (상세 모드 진입) | **v8 방식으로 변경 ★★★** |
| **프로젝트 상세 모드** | ❌ | ✅ PROJECT_NAV (ERP/시공/Design/문서 4섹션) | **v8에서 포팅 ★★** |
| **ERP Overview** | ❌ | ✅ 6개 KPI + 예산vs집행 + 원가구성 | **v8에서 포팅 ★★** |
| **ERP Budget** | ❌ | ✅ 공종별 예산 관리 | **v8에서 포팅 ★** |
| **ERP Attachments** | ❌ | ✅ 비용유형별 증빙 관리 | **v8에서 포팅 ★** |
| **ERP Report** | ❌ | ✅ 매출·원가·마진·VAT 분석 | **v8에서 포팅 ★** |
| 태그 관리 | ❌ | ✅ 프로젝트 태그 (IT, VIP 등) | v8에서 포팅 |

### 2.4 견적 & 계약

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| 견적서 편집 | ✅ 상세 인라인 편집 (공종별 접기/펼치기) | ✅ 유사 | v7 유지 |
| 견적 계산 엔진 | ✅ `calcP()` | ✅ `calcP()` 동일 | v7 유지 |
| 견적서 이메일 발송 | ✅ 실 발송 | 🔶 Mock 발송 | v7 유지 |
| **견적서 인쇄 프리뷰** | 🔶 기본 인쇄 | ✅ **5탭 프리뷰** (표지/요약/상세/공정/대금) — 세리프 서체 고급 디자인 | **v8에서 포팅 ★★** |
| **Gantt 자동 생성** | ❌ | ✅ `generateGanttFromEstimate()` — 9개 공사 Phase 기반 | **v8에서 포팅 ★** |
| 견적 템플릿 세트 | ✅ 선택·적용 | ❌ | v7 유지 |
| 단가 이력 추적 | ✅ `pricedb_history` | ❌ | v7 유지 |
| 계약서 관리 | ✅ 조항 편집 + AI 검토 | 🔶 기본 | v7 유지 |

### 2.5 시공 운영

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| 공정표 (Gantt) | ✅ 리스트 + 상세 편집 | ✅ + 자동생성 | v7 유지 + v8 자동생성 추가 |
| 발주 관리 | ✅ 목록/상세/필터/월그룹 | ✅ 유사 | v7 유지 |
| 발주서 이메일 | ✅ 실 발송 | ❌ | v7 유지 |
| **발주서 양식 (PO Form)** | 🔴 **아이템 테이블 미포함** | 🔶 기본 | **신규 개선 필요 ★** |
| 수금 관리 | ✅ KPI + 필터 + 지급 처리 | ✅ 유사 | v7 유지 |
| 노무비 관리 | ✅ KPI + 월 아코디언 + 노무명세서 | 🔶 기본 | v7 유지 |
| 경비 관리 | ✅ 결재 워크플로 + 이메일 | 🔶 기본 | v7 유지 |
| **현장사진 관리** | ❌ | ✅ 공사단계별 사진 | **v8에서 포팅 ★** |
| **현장 분석** | ❌ | ✅ 건물·설비·리스크 분석 | **v8에서 포팅 ★** |

### 2.6 영업 & CRM

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| CRM | 🔶 미팅 기반 기본 | 🔶 유사 | v7 유지 |
| **상담 관리** | ❌ | ✅ ConsultView — 파이프라인 (7단계), 예산, 경쟁사, 담당자, 후속조치 | **v8에서 포팅 ★★** |
| **RFP 관리** | ❌ | ✅ RfpView — 입찰, 평가점수, 팀배정, 제안서 | **v8에서 포팅 ★** |
| 미팅 관리 | ✅ + 이메일 + 템플릿 | ✅ + 체크리스트 + 준비상태 | v7 유지 + v8 체크리스트 추가 |
| **회의자료 관리** | ❌ | ✅ MeetingMaterialsView | **v8에서 포팅** |

### 2.7 디자인

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| **Design Overview** | ❌ | ✅ 프로젝트 디자인 현황 | **v8에서 포팅 ★** |
| **Concept** | ❌ | ✅ 디자인 컨셉 (키워드, 원칙, 스테이트먼트) | **v8에서 포팅** |
| **Mood Board** | ❌ | ✅ 무드보드 (그라디언트, 태그, 이미지) | **v8에서 포팅** |
| **Floor Plan** | ❌ | ✅ 존 구성 (영역, 면적, 무드 연결) | **v8에서 포팅** |
| **Materials** | ❌ | ✅ 마감재 관리 (브랜드, 스펙, 가격) | **v8에서 포팅** |
| **Design Document 프리뷰** | ❌ | ✅ 디자인 문서 인쇄 프리뷰 | **v8에서 포팅** |

### 2.8 데이터 & 관리

| 기능 | v7 (현재) | v8 (참조) | 통합 방향 |
|------|-----------|----------|----------|
| 단가 DB | ✅ 그룹뷰 + 이력추적 + 통계 | 🔶 기본 | v7 유지 |
| 거래처 관리 | ✅ 상세 | ✅ 유사 | v7 유지 |
| 팀원 관리 | ✅ | ✅ | v7 유지 |
| AS·하자 관리 | ✅ | ✅ | v7 유지 |
| 세금계산서 | ✅ 자동계산 + 인쇄 | ✅ 유사 | v7 유지 |
| 리포트 | ✅ 월간/분기 탭 | ✅ 유사 | v7 유지 |
| 관리자 | ✅ 회사정보 + 백업 | 🔶 SettingsView | v7 유지 |
| **설정 화면** | ❌ (관리자에 포함) | ✅ SettingsView 별도 | v8 참고하여 개선 |

---

## 3. 🔴 치명적 버그 (즉시 수정 필요)

### Bug #1: `updateOrder()` — undefined 함수 호출
- **위치**: app.js line 4778
- **증상**: 발주 아이템 수정 시 `getData()`/`saveOrderManual()` 호출 → 정의되지 않음 → 발주 편집 불가
- **수정**: `getOrders()` + `api()` 패턴으로 교체

### Bug #2: `deleteOrder()` — undefined 함수 호출
- **위치**: app.js line 2425 부근
- **증상**: 발주 삭제 시 동일 문제
- **수정**: API 직접 호출 패턴으로 교체

### Bug #3: `monthlyAccordion()` 중복 정의
- **위치**: app.js line 4098 & line 4788
- **증상**: 두 번 정의되어 후자가 전자를 덮어씀 → 일부 모듈에서 예기치 않은 동작
- **수정**: 하나로 통합

---

## 4. 🟡 사용자 지적 문제 (핵심 UX 이슈)

### 이슈 A: "원래 쓰던 대시보드가 사라져서 불편해"
- **현상**: v7의 `renderDash()`는 **운영 대시보드** (일정, 빠른 실행, 리스크, 공지, 날씨 등)
- **문제**: 경영 대시보드(v8 DashView)가 도입되면 이 운영 대시보드가 교체될 위험
- **해결**: 
  - `dash` (메인) = **운영 대시보드** (현재 renderDash) 유지·정리
  - `exec_dash` (신규) = **경영 대시보드** (v8 DashView 포팅)
  - 사이드바 NAV에 둘 다 배치

### 이슈 B: "수익분석에서 프로젝트 클릭하면 프로젝트 메뉴로 이동하는데"
- **현상**: 현재 코드에서 프로젝트 클릭 시 `nav('estimate')` → 견적서만 보임
- **해결**: 프로젝트 클릭 시 **프로젝트 상세 모드**(erp_overview) 진입으로 변경
- **구현**: v8의 `enterProject(pid)` → `selProject 설정 + erp_overview 이동` 패턴 포팅

### 이슈 C: "프로젝트 메뉴에서 각 프로젝트 클릭하면 프로젝트 메뉴로 넘어가야 해"
- **현상**: 프로젝트 목록에서 클릭 → 편집 모달만 열림
- **해결**: v8의 `PROJECT_NAV` 구조 도입
  - 프로젝트 선택 → 사이드바가 프로젝트 전용 네비로 전환
  - ERP(Overview/Budget/첨부/견적/리포트) + 시공(공정/발주/수금/노무) + Design(5개) + 문서
  - `← 보드` 버튼으로 프로젝트 목록 복귀

---

## 5. 통합 마스터 플랜 — 개발 로드맵

### 전략 원칙
1. **v7을 베이스로 유지** — 서버, DB, CSS, 반응형, 이메일, AI, 차트 등 인프라 전부 유지
2. **v8의 비즈니스 로직을 Vanilla JS로 포팅** — React 컴포넌트 → DOM 렌더 함수로 변환
3. **기존 기능은 깨뜨리지 않음** — 추가만, 교체하지 않음
4. **CSS 변수 체계 준수** — 인라인 스타일(T 객체) 대신 var(--) 사용

---

### Phase 0: 버그 수정 (즉시, 30분)
| # | 작업 | 상태 |
|---|------|------|
| 0-1 | `updateOrder()` 함수 수정 → api() 패턴 | ⬜ |
| 0-2 | `deleteOrder()` 함수 수정 → api() 패턴 | ⬜ |
| 0-3 | `monthlyAccordion()` 중복 제거 → 하나로 통합 | ⬜ |

---

### Phase 1: 경영 엔진 포팅 (1일)
> v8의 핵심 계산 엔진을 v7에 이식

| # | 작업 | 포팅 원본 | 설명 |
|---|------|----------|------|
| 1-1 | `getFinSummary(pid)` | v8 line 78-98 | 프로젝트별 통합 수익 계산 (견적원가, 실집행, 수금, 마진) |
| 1-2 | `getMonthlyAgg(ym)` | v8 line 101-130 | 월별 매출/지출/순이익 집계 |
| 1-3 | `COST_TYPES`, `COST_ICONS` | v8 line 45-48 | 비용유형 상수 (공사비/인건비/경비/기타) |
| 1-4 | `renderExecDash()` | v8 DashView line 1054-1214 | 경영 대시보드 (KPI 6개 + 현금흐름 + 수익 랭킹) |
| 1-5 | `renderCashFlow()` | v8 CashFlowView line 1217-1290 | 12개월 현금 흐름 뷰 |
| 1-6 | `renderProfitRank()` | v8 ProfitRankView line 1294-1369 | 수익 분석 (프로젝트별·거래처별 + 정렬) |
| 1-7 | NAV 구조 수정 | — | 경영 섹션에 `경영 현황`, `현금 흐름`, `수익 분석` 추가 |

---

### Phase 2: 프로젝트 상세 모드 (1-2일)
> v8의 핵심 UX — 프로젝트 진입 시 별도 네비게이션

| # | 작업 | 포팅 원본 | 설명 |
|---|------|----------|------|
| 2-1 | `PROJECT_NAV` 구조 도입 | v8 line 192-215 | 프로젝트 전용 사이드바 (4섹션) |
| 2-2 | `enterProject(pid)` 패턴 | v8 line 3680 | 프로젝트 진입 함수 |
| 2-3 | `renderNav()` 수정 | — | 프로젝트 모드 시 사이드바 전환 |
| 2-4 | `renderErpOverview(pid)` | v8 ErpOverviewView line 3063-3204 | 프로젝트 종합 현황 (6 KPI + 예산vs집행 + 원가구성) |
| 2-5 | `renderErpBudget(pid)` | v8 ErpBudgetView line 3206-3240 | 예산 관리 |
| 2-6 | `renderErpAttachments(pid)` | v8 ErpAttachmentsView line 3241-3428 | 증빙 관리 (비용유형별) |
| 2-7 | `renderErpReport(pid)` | v8 ErpReportView line 3429-3638 | 프로젝트별 리포트 |
| 2-8 | 전체 프로젝트 클릭 동작 수정 | — | `nav('estimate')` → `enterProject(pid)` 전환 |

---

### Phase 3: 영업 모듈 포팅 (1-2일)
> v8의 신규 CRM 모듈

| # | 작업 | 포팅 원본 | 설명 |
|---|------|----------|------|
| 3-1 | `consultations` DB 테이블 추가 | — | 서버 index.tsx에 테이블 + CRUD |
| 3-2 | `renderConsultations()` | v8 ConsultView line 1555-1628 | 상담 관리 (7단계 파이프라인) |
| 3-3 | `rfps` DB 테이블 추가 | — | 서버 index.tsx에 테이블 + CRUD |
| 3-4 | `renderRFPs()` | v8 RfpView line 1630-1702 | RFP 관리 (입찰·평가·마감) |
| 3-5 | NAV에 영업 섹션 추가 | — | 상담관리, RFP 추가 |

---

### Phase 4: 견적서 프리뷰 & Gantt 자동생성 (1-2일)
> v8의 고급 문서 기능

| # | 작업 | 포팅 원본 | 설명 |
|---|------|----------|------|
| 4-1 | `renderEstimatePreview(pid)` | v8 EstimatePreviewDocument line 567-940 | 5탭 인쇄용 프리뷰 (표지/요약/상세/공정/대금) |
| 4-2 | `GANTT_PHASES` 상수 | v8 line 135-160 | 9개 공사 Phase 정의 |
| 4-3 | `generateGanttFromEstimate(pid)` | v8 line 135-190 | 견적서에서 공정표 자동 생성 |
| 4-4 | 견적서 화면에 프리뷰/자동생성 버튼 추가 | — | UI 연결 |

---

### Phase 5: 디자인 모듈 포팅 (2-3일)
> v8의 디자인 프레젠테이션 모듈

| # | 작업 | 포팅 원본 |
|---|------|----------|
| 5-1 | `design_*` DB 테이블 추가 | concepts, moods, zones, materials |
| 5-2 | `renderDesignOverview()` | v8 DesignOverviewView |
| 5-3 | `renderConcept()` | v8 ConceptView |
| 5-4 | `renderMoodBoard()` | v8 MoodView |
| 5-5 | `renderFloorPlan()` | v8 FloorPlanView |
| 5-6 | `renderMaterials()` | v8 MaterialView |
| 5-7 | `renderDesignDocument()` | v8 DesignDocument (인쇄 프리뷰) |

---

### Phase 6: 현장 관리 & 회의자료 (1일)

| # | 작업 | 포팅 원본 |
|---|------|----------|
| 6-1 | `site_photos` DB 테이블 추가 | — |
| 6-2 | `renderSitePhotos()` | v8 SitePhotosView |
| 6-3 | `site_analysis` DB 테이블 추가 | — |
| 6-4 | `renderSiteAnalysis()` | v8 SiteAnalysisView |
| 6-5 | `meeting_materials` 테이블 확장 | — |
| 6-6 | `renderMeetingMaterials()` 개선 | v8 MeetingMaterialsView |
| 6-7 | 미팅에 체크리스트·준비상태 추가 | v8 meetings 확장 |

---

### Phase 7: 프리셋 메뉴 연/월 구조 + PO 양식 (1-2일)
> 이전 리포트에서 지적된 미구현 항목

| # | 작업 | 설명 |
|---|------|------|
| 7-1 | 프리셋 3단 드릴다운 | 년 → 월 → 프로젝트ID 계층 네비게이션 |
| 7-2 | 페이지 공통 프로젝트 필터 드롭다운 | 발주/노무/경비 등 모든 페이지에 프로젝트 필터 |
| 7-3 | PO 양식 개선 | 회사정보 + 아이템 테이블 + 합계 + 인쇄/PDF |
| 7-4 | PO 이메일에 아이템 포함 | 현재 요약만 보냄 → 전체 아이템 테이블 포함 |

---

### Phase 8: CSS 변수 마이그레이션 (ID 9) + 마무리

| # | 작업 | 설명 |
|---|------|------|
| 8-1 | CSS 변수 전체 마이그레이션 | 나머지 하드코딩 색상 → var(--) 전환 |
| 8-2 | 운영 대시보드 정리 | 위젯 배치 최적화, 불필요 항목 정리 |
| 8-3 | 전체 E2E 테스트 | 모든 CRUD, 네비게이션, 이메일 발송 |
| 8-4 | 배포 검증 | Cloudflare Pages 프로덕션 배포 + 확인 |

---

## 6. 사이드바 NAV 목표 구조 (통합 후)

```
┌─────────────────────────────────────────┐
│  Frame Plus ERP                         │
├─────────────────────────────────────────┤
│  🏠 메인                                │
│    ├ 대표 대시보드 (dash)     [메인]     │
│    └ 경영 현황 (exec_dash)    [NEW]     │
│                                         │
│  📊 경영                                │
│    ├ 현금 흐름 (cashflow)     [NEW]     │
│    ├ 수익 분석 (profit_rank)  [NEW]     │
│    └ 월 손익 리포트 (reports)            │
│                                         │
│  📋 프로젝트                            │
│    ├ 프로젝트 목록 (projects)            │
│    ├ 견적서 (estimate)                  │
│    └ 계약 (contracts)                   │
│                                         │
│  🤝 영업                        [NEW]   │
│    ├ 상담 관리 (consultations)  [NEW]   │
│    ├ RFP 관리 (rfp)            [NEW]   │
│    └ CRM (crm)                          │
│                                         │
│  🏗️ 공사 관리                           │
│    ├ 공정표 (gantt)                     │
│    ├ 발주 관리 (orders)                 │
│    ├ 수금 관리 (collection)              │
│    ├ 노무비 (labor)                     │
│    └ 경비 (expenses)                    │
│                                         │
│  💾 데이터                              │
│    ├ 단가 DB (pricedb)                  │
│    ├ 거래처 (vendors)                   │
│    ├ 팀원 관리 (team)                   │
│    ├ 미팅/회의자료 (meetings)            │
│    └ 현장사진 (site_photos)     [NEW]   │
│                                         │
│  ⚙️ 시스템                              │
│    ├ 세금계산서 (tax)                    │
│    ├ AS·하자 (as)                       │
│    ├ 알림 센터 (notifications)           │
│    ├ 결재함 (approvals)                 │
│    └ 관리자/설정 (admin)                │
└─────────────────────────────────────────┘

[프로젝트 상세 모드] (프로젝트 클릭 시)
┌─────────────────────────────────────────┐
│  ← 보드     [프로젝트명]               │
│  [클라이언트] · [면적]                  │
├─────────────────────────────────────────┤
│  📊 ERP                                │
│    ├ Overview       [NEW]               │
│    ├ Budget         [NEW]               │
│    ├ Attachments    [NEW]               │
│    ├ 견적서                             │
│    └ Report         [NEW]               │
│                                         │
│  🏗️ 시공                               │
│    ├ 공정표                             │
│    ├ 발주                               │
│    ├ 수금                               │
│    ├ 노무비                             │
│    ├ 현장사진       [NEW]               │
│    └ 현장 분석      [NEW]               │
│                                         │
│  ◆ Design           [NEW]              │
│    ├ Overview                           │
│    ├ Concept                            │
│    ├ Mood Board                         │
│    ├ Floor Plan                         │
│    └ Materials                          │
│                                         │
│  📄 문서                                │
│    └ 계약서                             │
└─────────────────────────────────────────┘
```

---

## 7. 예상 일정

| Phase | 내용 | 소요 | 누적 |
|-------|------|------|------|
| **Phase 0** | 버그 수정 3건 | 0.5일 | 0.5일 |
| **Phase 1** | 경영 엔진 + 대시보드 | 1일 | 1.5일 |
| **Phase 2** | 프로젝트 상세 모드 | 1.5일 | 3일 |
| **Phase 3** | 영업 모듈 (상담/RFP) | 1.5일 | 4.5일 |
| **Phase 4** | 견적 프리뷰 + Gantt 자동 | 1.5일 | 6일 |
| **Phase 5** | 디자인 모듈 5개 | 2일 | 8일 |
| **Phase 6** | 현장관리 + 회의자료 | 1일 | 9일 |
| **Phase 7** | 프리셋 메뉴 + PO 양식 | 1.5일 | 10.5일 |
| **Phase 8** | CSS 마이그레이션 + 테스트 | 1.5일 | **12일** |

---

## 8. 최종 통합 후 예상 모듈 수

| 구분 | 현재 (v7) | 통합 후 | 증가 |
|------|-----------|---------|------|
| 페이지/뷰 | 22개 | **42개** | +20 |
| DB 테이블 | 20개 | **26개** | +6 |
| API 엔드포인트 | ~50개 | **~70개** | +20 |
| 함수 수 | 272개 | **~380개** | +108 |
| 코드 라인 | 6,163줄 | **~10,000줄** | +3,837 |

---

## 9. 결론 — 왜 이 전략이 최강인가

### v7 (베이스)이 제공하는 것
- 🏗️ 실가동 서버 인프라 (D1 DB, API, CRUD 자동화)
- 🎨 프로급 Pluuug SaaS 디자인 (CSS 변수, 다크모드, 반응형)
- 📧 실 이메일 발송, 🌤️ 날씨, 🤖 AI 연동
- 📊 Chart.js, 📦 XLSX, 🖨️ 인쇄 등 성숙한 기능

### v8 (결합)이 더하는 것
- 💰 CEO급 경영 분석 (통합 수익, 현금흐름, 수익 랭킹)
- 📋 프로젝트 심층 관리 (상세 모드, ERP 4뷰)
- 🤝 영업 파이프라인 (상담 7단계, RFP 관리)
- 🎨 디자인 프레젠테이션 (5개 모듈)
- 📄 고급 문서 (5탭 견적 프리뷰, 디자인 문서)
- 🔧 자동화 (Gantt 자동생성, 예산 초과 경고)

### 통합 결과
> **건설/인테리어 전문 올인원 ERP** — 영업(상담→RFP) → 디자인(컨셉→마감재) → 견적(자동계산→인쇄 프리뷰) → 계약 → 시공(공정→발주→노무) → 수금 → 경영분석(수익→현금흐름) 전 과정을 하나의 앱에서 처리

---

**다음 단계**: Phase 0(버그 수정)부터 시작합니까? 아니면 Phase 1(경영 엔진)부터?
